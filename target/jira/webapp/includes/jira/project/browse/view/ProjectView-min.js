define("jira/project/browse/projectview",["jquery","marionette","jira/util/data/meta","jira/moment","wrm/context-path","aui/flag","jira/ajs/ajax/ajax-util","jira/util/strings"],function(e,t,r,i,a,c,o,s){"use strict";return t.ItemView.extend({template:function(e){return e.isAdminMode=r.get("in-admin-mode"),e.archivingEnabled=r.get("archiving-enabled"),e.archivedTimestamp&&(e.archivedDate=i(e.archivedTimestamp).format("Do MMMM YYYY")),e.lastUpdatedTimestamp&&(e.lastUpdatedDate=i(e.lastUpdatedTimestamp).format("Do MMMM YYYY")),JIRA.Templates.Project.Browse.projectRow(e)},ui:{name:"td.cell-type-name a",leadUser:"td.cell-type-user a",category:"td.cell-type-category a",url:"td.cell-type-url a",restore:".aui-list-truncate li a.restore-project"},events:{"click @ui.name":function(){this.trigger("project-view.click-project-name",this.model)},"click @ui.leadUser":function(){this.trigger("project-view.click-lead-user",this.model)},"click @ui.category":function(){this.trigger("project-view.click-category",this.model)},"click @ui.url":function(){this.trigger("project-view.click-url",this.model)}},onRender:function(){this.unwrapTemplate(),this.ui.restore.on("click",this.restoreProject.bind(this))},restoreProject:function(t){var r=this;t.preventDefault();var i=this.model.get("key");e.ajax({url:a()+"/rest/api/2/project/"+i+"/restore",type:"PUT",dataType:"text"}).success(function(){r.model.trigger("destroy",r.model),c({type:"success",close:"manual",body:JIRA.Templates.Project.Browse.restoreSuccessFlag({projectName:s.escapeHtml(r.model.get("name")),projectKey:i})})}).error(function(e){var t=o.getErrorMessageFromXHR(e);c({type:"error",close:"manual",body:t})})}})});